<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>GrowGTPS - Top Up Role & Assets</title>
<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    min-height: 100vh;
    color: #333;
    line-height: 1.6;
  }

  .container {
    max-width: 800px;
    margin: 0 auto;
    padding: 20px;
  }

  .header {
    text-align: center;
    margin-bottom: 40px;
    color: white;
  }

  .header h1 {
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: 10px;
    text-shadow: 0 2px 4px rgba(0,0,0,0.3);
    letter-spacing: 1px;
  }

  .header p {
    font-size: 1.1rem;
    opacity: 0.9;
    font-weight: 300;
  }

  .form-card {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    border-radius: 20px;
    padding: 30px;
    box-shadow: 0 20px 40px rgba(0,0,0,0.1);
    border: 1px solid rgba(255,255,255,0.2);
    margin-bottom: 40px;
    transition: transform 0.3s ease;
  }

  .form-card:hover {
    transform: translateY(-5px);
  }

  .form-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-bottom: 20px;
  }

  .form-group {
    display: flex;
    flex-direction: column;
  }

  .form-group.full-width {
    grid-column: 1 / -1;
  }

  label {
    font-weight: 600;
    color: #374151;
    margin-bottom: 8px;
    font-size: 0.95rem;
  }

  input[type=text],
  input[type=email],
  input[type=number] {
    padding: 12px 16px;
    border: 2px solid #e5e7eb;
    border-radius: 12px;
    font-size: 1rem;
    transition: all 0.3s ease;
    background: rgba(255,255,255,0.8);
  }

  input[type=text]:focus,
  input[type=email]:focus,
  input[type=number]:focus {
    outline: none;
    border-color: #3b82f6;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    background: white;
  }

  .item-selector {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 15px;
    margin-top: 10px;
  }

  .item-box {
    background: rgba(255, 255, 255, 0.9);
    border: 2px solid #e5e7eb;
    border-radius: 12px;
    padding: 15px;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
  }

  .item-box:hover {
    border-color: #3b82f6;
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(59, 130, 246, 0.2);
  }

  .item-box.selected {
    border-color: #3b82f6;
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(29, 78, 216, 0.1));
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
  }

  .item-icon {
    font-size: 2rem;
    margin-bottom: 8px;
  }

  .item-name {
    font-weight: 600;
    color: #374151;
    margin-bottom: 5px;
    font-size: 0.95rem;
  }

  .item-price {
    color: #059669;
    font-weight: 700;
    font-size: 0.9rem;
  }

  .submit-btn {
    background: linear-gradient(135deg, #3b82f6, #1d4ed8);
    border: none;
    color: white;
    font-weight: 600;
    cursor: pointer;
    border-radius: 12px;
    padding: 16px 24px;
    font-size: 1.1rem;
    width: 100%;
    margin-top: 20px;
    transition: all 0.3s ease;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .submit-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 25px rgba(59, 130, 246, 0.3);
  }

  .submit-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
  }

  .info-section {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    border-radius: 20px;
    padding: 30px;
    box-shadow: 0 20px 40px rgba(0,0,0,0.1);
    margin-bottom: 40px;
  }

  .info-grid {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 20px;
    margin-top: 20px;
  }

  .info-card {
    background: linear-gradient(135deg, #f8fafc, #e2e8f0);
    padding: 20px;
    border-radius: 12px;
    text-align: center;
    border: 1px solid #e5e7eb;
  }

  .info-card h3 {
    color: #1f2937;
    margin-bottom: 10px;
    font-size: 1.1rem;
  }

  .info-card p {
    color: #6b7280;
    font-size: 0.9rem;
    line-height: 1.5;
  }

  .contact-section {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    border-radius: 20px;
    padding: 30px;
    text-align: center;
    box-shadow: 0 20px 40px rgba(0,0,0,0.1);
  }

  .contact-btn {
    background: linear-gradient(135deg, #10b981, #059669);
    color: white;
    text-decoration: none;
    padding: 12px 24px;
    border-radius: 12px;
    font-weight: 600;
    display: inline-block;
    margin: 10px;
    transition: all 0.3s ease;
  }

  .contact-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(16, 185, 129, 0.3);
  }

  .loading {
    display: inline-block;
    width: 20px;
    height: 20px;
    border: 3px solid #f3f3f3;
    border-top: 3px solid #3b82f6;
    border-radius: 50%;
    animation: spin 1s linear infinite;
  }

  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }

  @media (max-width: 768px) {
    .container {
      padding: 15px;
    }

    .header h1 {
      font-size: 2rem;
    }

    .form-grid {
      grid-template-columns: 1fr;
      gap: 15px;
    }

    .info-grid {
      grid-template-columns: 1fr;
      gap: 15px;
    }

    .form-card,
    .info-section,
    .contact-section {
      padding: 20px;
    }
  }

  @media (max-width: 480px) {
    .header h1 {
      font-size: 1.8rem;
    }
  }
</style>
</head>
<body>

<div class="container">
  <div class="header">
    <h1>üéÆ GrowGTPS</h1>
    <p>Top Up Role & Assets GrowGTPS</p>
  </div>

  <div class="form-card">
    <h2 style="color: #1f2937; margin-bottom: 20px; text-align: center;">üìù Form Pemesanan</h2>
    <form id="orderForm" autocomplete="off">
      <div class="form-grid">
        <div class="form-group">
          <label for="username">üéØ GrowGTPS Username:</label>
          <input type="text" id="username" name="username" required placeholder="Masukkan username GrowGTPS Anda" />
        </div>

        <div class="form-group">
          <label for="world">üåç World Name:</label>
          <input type="text" id="world" name="world" required placeholder="Nama world untuk pengiriman" />
        </div>

        <div class="form-group">
          <label for="email">üìß Email:</label>
          <input type="email" id="email" name="email" required placeholder="email@example.com" />
        </div>

        <div class="form-group">
          <label for="whatsapp">üì± WhatsApp Number:</label>
          <input type="text" id="whatsapp" name="whatsapp" placeholder="+62xxxxxxxxxx" required pattern="^\+62\d{8,15}$" title="Gunakan format +62 diikuti nomor" />
        </div>

        <div class="form-group full-width">
          <label for="item">üéÅ Pilih Item (Role & Assets):</label>
          <div class="item-selector">
            <div class="item-box" data-value="Super Supporter|2500">
              <div class="item-icon">‚≠ê</div>
              <div class="item-name">Super Supporter</div>
              <div class="item-price">Rp 2.500</div>
            </div>
            <div class="item-box" data-value="Crole Permanent|5000">
              <div class="item-icon">üé≠</div>
              <div class="item-name">Crole Permanent</div>
              <div class="item-price">Rp 5.000</div>
            </div>
            <div class="item-box" data-value="Role Admin|15000">
              <div class="item-icon">üë®‚Äçüíº</div>
              <div class="item-name">Role Admin</div>
              <div class="item-price">Rp 15.000</div>
            </div>
            <div class="item-box" data-value="Role Community Manager|25000">
              <div class="item-icon">üë•</div>
              <div class="item-name">Role Community Manager</div>
              <div class="item-price">Rp 25.000</div>
            </div>
            <div class="item-box" data-value="Iori Yagami|25000">
              <div class="item-icon">ü•ã</div>
              <div class="item-name">Iori Yagami</div>
              <div class="item-price">Rp 25.000</div>
            </div>
            <div class="item-box" data-value="Role General Manager|35000">
              <div class="item-icon">üè¢</div>
              <div class="item-name">Role General Manager</div>
              <div class="item-price">Rp 35.000</div>
            </div>
            <div class="item-box" data-value="Sunjinwo|35000">
              <div class="item-icon">üåü</div>
              <div class="item-name">Sunjinwo</div>
              <div class="item-price">Rp 35.000</div>
            </div>
            <div class="item-box" data-value="Role God|50000">
              <div class="item-icon">‚ö°</div>
              <div class="item-name">Role God</div>
              <div class="item-price">Rp 50.000</div>
            </div>
            <div class="item-box" data-value="Legendary Wings|65000">
              <div class="item-icon">üïäÔ∏è</div>
              <div class="item-name">Legendary Wings</div>
              <div class="item-price">Rp 65.000</div>
            </div>
            <div class="item-box" data-value="Role Police|80000">
              <div class="item-icon">üëÆ</div>
              <div class="item-name">Role Police</div>
              <div class="item-price">Rp 80.000</div>
            </div>
            <div class="item-box" data-value="Role Helper|150000">
              <div class="item-icon">üõ°Ô∏è</div>
              <div class="item-name">Role Helper</div>
              <div class="item-price">Rp 150.000</div>
            </div>
          </div>
          <input type="hidden" id="item" name="item" required />
        </div>

        <div class="form-group">
          <label for="quantity">üì¶ Jumlah Pembelian:</label>
          <input type="number" id="quantity" name="quantity" value="1" min="1" max="100" required />
        </div>
      </div>

      <button type="submit" class="submit-btn" disabled>
        üöÄ Buat Pesanan Disini
      </button>
    </form>
  </div>

  <div class="info-section">
    <h2 style="color: #1f2937; text-align: center; margin-bottom: 20px;">‚ÑπÔ∏è Informasi Penting</h2>
    
    <div class="info-grid">
      <div class="info-card">
        <h3>‚è∞ Waktu Proses</h3>
        <p>Pesanan diproses dalam 1-24 jam setelah pembayaran dikonfirmasi. Harap bersabar!</p>
      </div>
      
      <div class="info-card">
        <h3>üîí Keamanan</h3>
        <p>Semua transaksi menggunakan QRIS resmi. Data Anda aman dan tidak akan disalahgunakan.</p>
      </div>
      
      <div class="info-card">
        <h3>üìû Customer Service</h3>
        <p>Tim support siap membantu 24/7 melalui WhatsApp. Respon cepat & ramah!</p>
      </div>
    </div>
  </div>

  <div class="contact-section">
    <h2 style="color: #1f2937; margin-bottom: 15px;">üí¨ Butuh Bantuan?</h2>
    <p style="color: #6b7280; margin-bottom: 20px;">
      Tim customer service kami siap membantu Anda 24/7
    </p>
    <a href="https://wa.me/6288112733391" class="contact-btn" target="_blank">
      üì± Chat WhatsApp
    </a>
  </div>
</div>

<script>
(function(){
  var DB_NAME = 'growgtps_customer_db';
  var DB_STORE = 'customer_orders';
  var db;

  function openDb(){
    return new Promise(function(resolve, reject) {
      var req = indexedDB.open(DB_NAME, 1);
      req.onerror = function() { reject('Gagal membuka database.'); };
      req.onsuccess = function() {
        db = req.result;
        resolve(db);
      };
      req.onupgradeneeded = function(e) {
        db = e.target.result;
        if(!db.objectStoreNames.contains(DB_STORE)){
          var store = db.createObjectStore(DB_STORE, {keyPath:'id', autoIncrement:true});
          store.createIndex('timestamp', 'timestamp', {unique:false});
        }
      };
    });
  }

  function addOrder(order) {
    return new Promise(function(resolve, reject) {
      var tx = db.transaction(DB_STORE, 'readwrite');
      var store = tx.objectStore(DB_STORE);
      var req = store.add(order);
      req.onsuccess = function() { resolve(req.result); };
      req.onerror = function() { reject('Gagal menambah order.'); };
    });
  }

  function generateTrackingNumber() {
    var prefix = 'GTPS';
    var timestamp = Date.now().toString();
    var random = Math.random().toString(36).substr(2, 4).toUpperCase();
    return prefix + timestamp.substr(-6) + random;
  }

  function showNotification(message, type){
    var notification = document.createElement('div');
    notification.style.cssText = 'position: fixed; top: 20px; right: 20px; padding: 15px 20px; background: ' + (type === 'success' ? '#10b981' : '#ef4444') + '; color: white; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); z-index: 1000; font-weight: 600; max-width: 400px;';
    notification.textContent = message;
    document.body.appendChild(notification);
    setTimeout(function() {
      if (notification.parentNode) {
        notification.parentNode.removeChild(notification);
      }
    }, 5000);
  }

  function updateSubmitButton() {
    var submitBtn = document.querySelector('.submit-btn');
    var usernameInput = document.getElementById('username');
    var itemHidden = document.getElementById('item');
    
    if (usernameInput.value.trim() === '' || itemHidden.value === '') {
      submitBtn.disabled = true;
    } else {
      submitBtn.disabled = false;
    }
  }

  function setupUI(){
    var form = document.getElementById('orderForm');
    var itemHidden = document.getElementById('item');
    var usernameInput = document.getElementById('username');

    updateSubmitButton();

    usernameInput.addEventListener('input', updateSubmitButton);
    usernameInput.addEventListener('blur', updateSubmitButton);

    var itemBoxes = document.querySelectorAll('.item-box');
    for(var i = 0; i < itemBoxes.length; i++) {
      itemBoxes[i].addEventListener('click', function() {
        for(var j = 0; j < itemBoxes.length; j++) {
          itemBoxes[j].classList.remove('selected');
        }
        this.classList.add('selected');
        itemHidden.value = this.getAttribute('data-value');
        updateSubmitButton();
      });
    }

    form.addEventListener('submit', function(ev) {
      ev.preventDefault();

      if (usernameInput.value.trim() === '') {
        showNotification('Username GrowGTPS wajib diisi!', 'error');
        usernameInput.focus();
        return;
      }

      if (!itemHidden.value) {
        showNotification('Silakan pilih item terlebih dahulu!', 'error');
        return;
      }

      var submitBtn = form.querySelector('.submit-btn');
      submitBtn.disabled = true;
      submitBtn.innerHTML = '<div class="loading"></div> Memproses...';

      var username = form.username.value.trim();
      var world = form.world.value.trim();
      var email = form.email.value.trim();
      var whatsapp = form.whatsapp.value.trim();
      var quantity = parseInt(form.quantity.value);
      
      var parts = itemHidden.value.split('|');
      var itemName = parts[0];
      var price = parseInt(parts[1]);
      var totalPrice = price * quantity;

      var order = {
        username: username,
        world: world,
        email: email,
        whatsapp: whatsapp,
        itemName: itemName,
        quantity: quantity,
        price: price,
        totalPrice: totalPrice,
        paymentMethod: 'QRIS',
        paymentStatus: 'Pending',
        deliveryStatus: 'Pending',
        timestamp: Date.now(),
        trackingNumber: generateTrackingNumber()
      };

      addOrder(order).then(function() {
        showNotification('Pesanan berhasil dibuat!', 'success');

        var orderDetails = 'PESANAN BERHASIL DIBUAT!\n\nDETAIL PESANAN:\nKode Order: ' + order.trackingNumber + '\nUsername: ' + username + '\nWorld: ' + world + '\nItem: ' + itemName + '\nJumlah: ' + quantity + '\nTotal: Rp ' + totalPrice.toLocaleString('id-ID') + '\n\nLANGKAH SELANJUTNYA:\n1. BUKA HALAMAN PEMBAYARAN:\n   https://growgtps.github.io/GrowGTPS/payment.html\n2. Scan QR QRIS ‚Üí Bayar: Rp ' + totalPrice.toLocaleString('id-ID') + '\n3. Screenshot bukti bayar\n4. Hubungi admin untuk konfirmasi\n\nWhatsApp: +62881-1273-3391\n\nSIMPAN KODE ORDER INI: ' + order.trackingNumber;
        
        alert(orderDetails);

        form.reset();
        for(var k = 0; k < itemBoxes.length; k++) {
          itemBoxes[k].classList.remove('selected');
        }
        itemHidden.value = '';
        updateSubmitButton();

      }).catch(function(error) {
        showNotification('Terjadi kesalahan: ' + error, 'error');
      }).finally(function() {
        submitBtn.disabled = false;
        submitBtn.innerHTML = 'üöÄ Buat Pesanan Disini';
        updateSubmitButton();
      });
    });
  }

  function init(){
    openDb().then(function() {
      setupUI();
    }).catch(function(e) {
      showNotification('Terjadi kesalahan sistem: ' + e, 'error');
    });
  }

  init();
})();
</script>

</body>
</html>
